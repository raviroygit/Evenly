<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="color-scheme" content="light">
    <meta name="supported-color-schemes" content="light">
    <title>You're invited to join <%= groupName %> on EvenlySplit</title>
    <style>
        /* Force light mode rendering */
        :root {
            color-scheme: light only;
        }
        body {
            margin: 0;
            padding: 0;
            background-color: #f5f5f5 !important;
        }
        /* Prevent dark mode overrides */
        * {
            color-scheme: light only !important;
        }
    </style>
</head>
<body style="margin: 0; padding: 0; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif; background-color: #f5f5f5 !important;">
    <!-- Wrapper table for email client compatibility -->
    <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f5f5f5; padding: 20px 0;">
        <tr>
            <td align="center">
                <!-- Main container -->
                <table width="100%" cellpadding="0" cellspacing="0" border="0" style="max-width: 600px; background-color: #ffffff; border-radius: 12px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                    <!-- Header -->
                    <tr>
                        <td style="padding: 40px 30px; text-align: center; background-color: #ffffff;">
                            <h1 style="margin: 0 0 8px 0; font-size: 32px; font-weight: 700; color: #6366f1;">Evenly</h1>
                            <p style="margin: 0 0 20px 0; color: #6b7280; font-size: 14px;">Expense sharing made simple</p>
                            <h2 style="margin: 0; font-size: 24px; font-weight: 600; color: #1f2937;">
                                <% if (isExistingUser) { %>
                                    You've been invited to a group!
                                <% } else { %>
                                    Welcome to Evenly!
                                <% } %>
                            </h2>
                        </td>
                    </tr>

                    <!-- Content -->
                    <tr>
                        <td style="padding: 0 30px 40px 30px; background-color: #ffffff;">
                            <!-- Group Info -->
                            <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f1f5f9; border-left: 4px solid #6366f1; border-radius: 8px; margin-bottom: 24px;">
                                <tr>
                                    <td style="padding: 20px;">
                                        <h3 style="margin: 0 0 8px 0; font-size: 20px; font-weight: 700; color: #1f2937;"><%= groupName %></h3>
                                        <p style="margin: 0; color: #6b7280; font-size: 14px;">Invited by <%= inviterName %></p>
                                    </td>
                                </tr>
                            </table>

                            <% if (isExistingUser) { %>
                                <p style="margin: 0 0 24px 0; color: #374151; font-size: 16px;">
                                    <strong><%= inviterName %></strong> has invited you to join the group "<strong><%= groupName %></strong>" on Evenly.
                                    Click the button below to accept the invitation and start sharing expenses with your group.
                                </p>
                            <% } else { %>
                                <p style="margin: 0 0 24px 0; color: #374151; font-size: 16px;">
                                    <strong><%= inviterName %></strong> has invited you to join the group "<strong><%= groupName %></strong>" on Evenly.
                                    Evenly makes it easy to split expenses, track who owes what, and settle up with friends, family, or colleagues.
                                </p>

                                <!-- Features -->
                                <h3 style="margin: 0 0 16px 0; font-size: 18px; font-weight: 600; color: #1f2937;">What you can do with Evenly:</h3>
                                <table width="100%" cellpadding="0" cellspacing="0" border="0" style="margin-bottom: 24px;">
                                    <tr>
                                        <td style="padding: 8px 0;">
                                            <table cellpadding="0" cellspacing="0" border="0">
                                                <tr>
                                                    <td style="padding-right: 12px; vertical-align: top; font-size: 16px;">üí∞</td>
                                                    <td style="color: #6b7280; font-size: 16px;">Split bills and expenses easily</td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;">
                                            <table cellpadding="0" cellspacing="0" border="0">
                                                <tr>
                                                    <td style="padding-right: 12px; vertical-align: top; font-size: 16px;">üìä</td>
                                                    <td style="color: #6b7280; font-size: 16px;">Track who owes what in real-time</td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;">
                                            <table cellpadding="0" cellspacing="0" border="0">
                                                <tr>
                                                    <td style="padding-right: 12px; vertical-align: top; font-size: 16px;">ü§ù</td>
                                                    <td style="color: #6b7280; font-size: 16px;">Settle up with group members</td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                    <tr>
                                        <td style="padding: 8px 0;">
                                            <table cellpadding="0" cellspacing="0" border="0">
                                                <tr>
                                                    <td style="padding-right: 12px; vertical-align: top; font-size: 16px;">üì±</td>
                                                    <td style="color: #6b7280; font-size: 16px;">Access from any device</td>
                                                </tr>
                                            </table>
                                        </td>
                                    </tr>
                                </table>
                            <% } %>

                            <!-- CTA Button -->
                            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                <tr>
                                    <td align="center" style="padding: 20px 0;">
                                        <a href="<%= invitationLink %>" style="display: inline-block; padding: 16px 40px; background-color: #6366f1; color: #ffffff !important; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px;">
                                            <% if (isExistingUser) { %>
                                                Accept Invitation
                                            <% } else { %>
                                                Open in Browser
                                            <% } %>
                                        </a>
                                    </td>
                                </tr>
                            </table>

                            <% if (!isExistingUser) { %>
                                <!-- App Download Box -->
                                <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #f0fdf4; border: 2px solid #86efac; border-radius: 8px; margin-bottom: 24px;">
                                    <tr>
                                        <td style="padding: 20px;">
                                            <h3 style="margin: 0 0 12px 0; font-size: 18px; font-weight: 600; color: #065f46;">üì± Download the Evenly App</h3>
                                            <p style="margin: 0 0 16px 0; color: #047857; font-size: 16px;">
                                                For the best experience, download our mobile app and accept the invitation there!
                                            </p>
                                            <table width="100%" cellpadding="0" cellspacing="0" border="0">
                                                <tr>
                                                    <td align="center" style="padding: 8px 0;">
                                                        <a href="<%= appDownloadLink %>" style="display: inline-block; padding: 16px 40px; background-color: #10b981; color: #ffffff !important; text-decoration: none; border-radius: 8px; font-weight: 600; font-size: 16px;">
                                                            üì≤ Get the App
                                                        </a>
                                                    </td>
                                                </tr>
                                            </table>
                                            <p style="margin: 12px 0 0 0; color: #6b7280; font-size: 13px; text-align: center;">
                                                Works on both Android and iOS
                                            </p>
                                        </td>
                                    </tr>
                                </table>

                                <!-- Warning Box -->
                                <table width="100%" cellpadding="0" cellspacing="0" border="0" style="background-color: #fef3c7; border: 2px solid #f59e0b; border-radius: 8px; margin-bottom: 24px;">
                                    <tr>
                                        <td style="padding: 16px;">
                                            <p style="margin: 0; color: #92400e; font-size: 14px;">
                                                <strong>Note:</strong> The "Get the App" button will automatically detect your device and take you to the Play Store (Android) or App Store (iOS). Once installed, open the app and accept your invitation!
                                            </p>
                                        </td>
                                    </tr>
                                </table>
                            <% } %>

                            <p style="margin: 0; color: #6b7280; font-size: 14px;">
                                This invitation will expire in 7 days. If you don't want to join this group, you can simply ignore this email.
                            </p>
                        </td>
                    </tr>

                    <!-- Footer -->
                    <tr>
                        <td style="padding: 24px 30px; background-color: #f9fafb; border-top: 1px solid #e5e7eb; text-align: center;">
                            <p style="margin: 0 0 8px 0; font-size: 14px; color: #6b7280;">
                                This email was sent by Evenly. If you have any questions, please contact us.
                            </p>
                            <p style="margin: 0; font-size: 12px; color: #9ca3af;">
                                ¬© <%= year %> Evenly. All rights reserved.
                            </p>
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
    </table>
</body>
</html>
